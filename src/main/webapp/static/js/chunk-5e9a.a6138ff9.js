(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5e9a"],{F5VI:function(e,t,s){"use strict";var n=s("g1XH");s.n(n).a},QhmF:function(e,t,s){"use strict";s.r(t);var n=s("KzkL"),i=s("ExMk"),a={name:"ExamineHandle",components:{XhUserCell:s("8GhS").p},props:{show:{type:Boolean,default:!1},status:{type:[String,Number],default:1},id:[String,Number],recordId:[String,Number],detail:{type:Object,default:function(){return{}}},examineType:{type:String,default:""}},data:function(){return{loading:!1,showDialog:!1,handleType:1,selectUsers:[],content:""}},computed:{title:function(){return 1==this.status?"Đồng ý":2==this.status?"Phê duyệt bị từ chối":4==this.status?"Rút lại phê duyệt":""},placeholder:function(){return 1==this.status?"Vui lòng nhập nhận xét phê duyệt (tùy chọn)":2==this.status?"Vui lòng nhập nhận xét phê duyệt (bắt buộc)":4==this.status?"Vui lòng nhập lý do rút phê duyệt (bắt buộc)":""}},watch:{show:{handler:function(e){this.showDialog=e},deep:!0,immediate:!0}},mounted:function(){},methods:{submitInfo:function(){2!=this.status&&4!=this.status||this.content?2==this.status||1==this.status?this.handlePassAndReject():4==this.status&&this.handleRevoke():this.$message.error(this.placeholder)},handleRevoke:function(){var e=this;this.loading=!0,this.getRequest()({id:this.id,recordId:this.recordId,status:this.status,remarks:this.content}).then(function(t){e.loading=!1,e.$message.success("Thành công"),e.$emit("save"),e.$bus.emit("examine-handle-bus"),e.$store.dispatch("GetMessageNum"),e.hiddenView()}).catch(function(){e.loading=!1})},getRequest:function(){return{crm_contract:n.c,crm_receivables:n.c,oa_examine:i.e}[this.examineType]},handlePassAndReject:function(){var e=this;this.loading=!0;var t={id:this.id,recordId:this.recordId,status:this.status,remarks:this.content};1==this.status&&2==this.detail.examineType&&1!=this.handleType&&(t.nextUserId=this.selectUsers[0].userId),this.getRequest()(t).then(function(t){e.loading=!1,e.$message.success("Thành công"),e.$emit("save",{type:e.status}),e.hiddenView(),e.$bus.emit("examine-handle-bus"),e.$store.dispatch("GetMessageNum")}).catch(function(){e.loading=!1})},handleClick:function(e){"cancel"==e?this.hiddenView():"confirm"==e&&this.submitInfo()},selectUserFocus:function(){this.handleType=2},selectExamineUser:function(e){this.selectUsers=e.value},hiddenView:function(){this.$emit("close")}}},l=(s("F5VI"),s("KHd+")),o=Object(l.a)(a,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:e.title,"append-to-body":!0,visible:e.showDialog,width:"400px"},on:{"update:visible":function(t){e.showDialog=t},close:e.hiddenView}},[1==e.status&&2==e.detail.examineType?s("div",{staticClass:"handle-type"},[s("flexbox",{staticClass:"handle-item"},[s("el-radio",{attrs:{label:1},model:{value:e.handleType,callback:function(t){e.handleType=t},expression:"handleType"}},[s("span")]),e._v(" "),s("div",{staticStyle:{"font-size":"12px"},nativeOn:{click:function(t){e.handleType=1}}},[e._v("Kết thúc đánh giá")])],1),e._v(" "),s("flexbox",{staticClass:"handle-item",attrs:{id:"selectUser"}},[s("el-radio",{attrs:{label:2},model:{value:e.handleType,callback:function(t){e.handleType=t},expression:"handleType"}},[s("span")]),e._v(" "),s("xh-user-cell",{staticClass:"select-user",attrs:{placeholder:"Chọn người phê duyệt tiếp theo"},on:{focus:e.selectUserFocus,"value-change":e.selectExamineUser}})],1)],1):e._e(),e._v(" "),1==e.status&&2==e.detail.examineType?s("div",{staticClass:"title"},[e._v("Ý kiến")]):e._e(),e._v(" "),s("el-input",{attrs:{rows:5,maxlength:200,placeholder:e.placeholder,type:"textarea",resize:"none","show-word-limit":""},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.handleClick("cancel")}}},[e._v("Hủy")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleClick("confirm")}}},[e._v("Xác nhận")])],1)],1)},[],!1,null,"4e4c68fc",null);o.options.__file="ExamineHandle.vue";t.default=o.exports},g1XH:function(e,t,s){}}]);