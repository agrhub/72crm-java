(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5ea8"],{"34dg":function(t,e,i){"use strict";i.r(e);var n=i("MT78"),a=i.n(n),l=i("KTTK"),s=i("B2Fc"),r=i("wd/R"),c=i.n(r),o={name:"TaskCompleteStatistics",components:{},data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()}},loading:!1,dateSelect:"",typeSelect:1,structuresProps:{children:"children",label:"label",value:"id"},deptList:[],structuresSelectValue:"",userOptions:[],userSelectValue:"",list:[],fieldList:[{field:"month",name:"Thời gian"},{field:"receivables",name:"Số tiền hợp đồng (đồng)"},{field:"achievement",name:"Số tiền nhận được (đồng)"},{field:"rate",name:"Tỷ lệ thành công (%)"}],axisChart:null,axisOption:null}},computed:{},mounted:function(){this.dateSelect=c()(new Date).year().toString(),this.getDeptList(),this.initAxis()},methods:{getDeptList:function(){var t=this;this.loading=!0,Object(l.b)().then(function(e){t.deptList=e.data,t.loading=!1,e.data.length>0&&(t.structuresSelectValue=e.data[0].id,t.getUserList(),t.getAhievementDatalist())}).catch(function(){t.loading=!1})},structuresValueChange:function(t){this.userSelectValue="",this.userOptions=[],this.getUserList()},getUserList:function(){var t=this,e={pageType:0};e.deptId=this.structuresSelectValue,Object(l.j)(e).then(function(e){t.userOptions=e.data}).catch(function(){})},getAhievementDatalist:function(){var t=this;this.loading=!0,Object(s.a)({year:this.dateSelect,type:this.typeSelect,deptId:this.structuresSelectValue,userId:this.userSelectValue}).then(function(e){var i=[],n=[],a=[];t.list=[];for(var l=0;l<12;l++){var s=e.data[l];i.push(s.receivables),n.push(s.achievement),a.push(s.rate),t.list.push(s)}t.axisOption.series[0].data=i,t.axisOption.series[1].data=n,t.axisOption.series[2].data=a,t.axisChart.setOption(t.axisOption,!0),t.loading=!1}).catch(function(){t.loading=!1})},handleClick:function(t){"search"===t&&(this.refreshTableHeadAndChartInfo(),this.getAhievementDatalist())},refreshTableHeadAndChartInfo:function(){this.fieldList[1].name=1==this.typeSelect?"Giá trị hợp đồng (đồng)":"Số tiền nhận được (đồng)",this.axisOption.legend.data[0]=1==this.typeSelect?"Giá trị hợp đồng":"Số tiền nhận được",this.axisOption.series[0].name=1==this.typeSelect?"Giá trị hợp đồng":"Số tiền nhận được"},initAxis:function(){var t=a.a.init(document.getElementById("axismain")),e={color:["#6ca2ff","#6ac9d7","#ff7474"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["Số tiền hợp đồng","Mục tiêu","Tỷ lệ thành công"],bottom:"0px",itemWidth:14},grid:{top:"5px",left:"20px",right:"20px",bottom:"40px",containLabel:!0,borderColor:"#fff"},xAxis:[{type:"category",data:["tháng 1","tháng 2","tháng 3","tháng 4","tháng 5","tháng 6","tháng 7","tháng 8","tháng 9","tháng 10","tháng 11","tháng 12"],axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:"#BDBDBD"},axisLine:{lineStyle:{color:"#BDBDBD"}},splitLine:{show:!1}}],yAxis:[{type:"value",name:"Giá trị hợp đồng",axisTick:{alignWithLabel:!0,lineStyle:{width:0}},axisLabel:{color:"#BDBDBD",formatter:"{value} đồng"},axisLine:{lineStyle:{color:"#BDBDBD"}},splitLine:{show:!1}},{type:"value",name:"Tỷ lệ thành công",axisTick:{alignWithLabel:!0,lineStyle:{width:0}},position:"right",axisLabel:{color:"#BDBDBD",formatter:"{value} %"},axisLine:{lineStyle:{color:"#BDBDBD"}},splitLine:{show:!1}}],series:[{name:"Giá trị hợp đồng",type:"bar",yAxisIndex:0,barWidth:15,data:[]},{name:"Mục tiêu",type:"bar",yAxisIndex:0,barWidth:15,data:[]},{name:"Tỷ lệ thành công",type:"line",yAxisIndex:1,data:[]}]};t.setOption(e,!0),this.axisOption=e,this.axisChart=t}}},u=(i("PQeu"),i("KHd+")),h=Object(u.a)(o,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"main-container"},[i("div",{staticClass:"handle-bar"},[i("el-date-picker",{attrs:{clearable:!1,"picker-options":t.pickerOptions,type:"year","value-format":"yyyy",placeholder:"Chọn ngày"},model:{value:t.dateSelect,callback:function(e){t.dateSelect=e},expression:"dateSelect"}}),t._v(" "),i("el-select",{attrs:{placeholder:"Vui lòng chọn"},model:{value:t.typeSelect,callback:function(e){t.typeSelect=e},expression:"typeSelect"}},t._l([{label:"Giá trị hợp đồng",value:1},{label:"Số tiền thanh toán",value:2}],function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),i("el-select",{attrs:{placeholder:"Chọn bộ phận"},on:{change:t.structuresValueChange},model:{value:t.structuresSelectValue,callback:function(e){t.structuresSelectValue=e},expression:"structuresSelectValue"}},t._l(t.deptList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),i("el-select",{attrs:{clearable:!0,placeholder:"Chọn nhân viên"},model:{value:t.userSelectValue,callback:function(e){t.userSelectValue=e},expression:"userSelectValue"}},t._l(t.userOptions,function(t){return i("el-option",{key:t.userId,attrs:{label:t.realname,value:t.userId}})})),t._v(" "),i("el-button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.handleClick("search")}}},[t._v("Tìm kiếm")])],1),t._v(" "),i("div",{staticClass:"content"},[t._m(0),t._v(" "),i("div",{staticClass:"table-content"},[i("el-table",{attrs:{data:t.list,stripe:"",border:"",height:"400","highlight-current-row":""}},t._l(t.fieldList,function(t,e){return i("el-table-column",{key:e,attrs:{prop:t.field,label:t.name,align:"center","header-align":"center","show-overflow-tooltip":""}})}))],1)])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"axis-content"},[e("div",{attrs:{id:"axismain"}})])}],!1,null,"6f6003e2",null);h.options.__file="TaskCompleteStatistics.vue";e.default=h.exports},B2Fc:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"c",function(){return l}),i.d(e,"b",function(){return s});var n=i("t3Un");function a(t){return Object(n.a)({url:"bi/taskCompleteStatistics",method:"post",data:t})}function l(t){return Object(n.a)({url:"bi/productStatistics",method:"post",data:t})}function s(t){return Object(n.a)({url:"biFunnel/sellFunnel",method:"post",data:t})}},PQeu:function(t,e,i){"use strict";var n=i("wkHN");i.n(n).a},wkHN:function(t,e,i){}}]);