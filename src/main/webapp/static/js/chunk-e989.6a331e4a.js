(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e989"],{"3yi6":function(e,t,i){"use strict";var n=i("7Qib"),a=i("KzkL"),s={name:"FollowRecordCell",components:{CRMFullScreenDetail:function(){return Promise.all([i.e("chunk-66f9"),i.e("chunk-660d"),i.e("chunk-4b7d"),i.e("chunk-4f77"),i.e("chunk-7962e")]).then(i.bind(null,"uMjE"))}},props:{item:{type:Object,default:function(){return{}}},crmType:{type:String,default:""},index:[String,Number]},data:function(){return{showFullDetail:!1,relationID:"",relationCrmType:""}},computed:{},mounted:function(){},methods:{previewImg:function(e,t){this.$bus.emit("preview-image-bus",{index:t,data:e.map(function(e,t,i){return e.url=e.filePath,e})})},downloadFile:function(e){Object(n.b)({path:e.filePath,name:e.name})},handleCommand:function(e){var t=this;this.$confirm("Xác nhận xóa?","Thông báo",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){Object(a.p)({recordId:t.item.recordId}).then(function(i){t.$emit("on-handle",{type:e,data:{item:t.item,index:t.index}}),t.$message.success("Thành công")}).catch(function(){})}).catch(function(){t.$message({type:"info",message:"Không thành công"})})},checkRelationDetail:function(e,t){this.relationID=t,this.relationCrmType=e,this.showFullDetail=!0}}},l=(i("VPeB"),i("KHd+")),c=Object(l.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fl-c"},[n("flexbox",{staticClass:"fl-h"},[n("div",{directives:[{name:"photo",rawName:"v-photo",value:{img:e.item.userImg,realname:e.item.realname},expression:"{img: item.userImg, realname: item.realname}"},{name:"lazy",rawName:"v-lazy:background-image",value:e.$options.filters.filterUserLazyImg(e.item.userImg),expression:"$options.filters.filterUserLazyImg(item.userImg)",arg:"background-image"}],staticClass:"div-photo fl-h-img"}),e._v(" "),n("div",{staticClass:"fl-h-b"},[n("div",{staticClass:"fl-h-name"},[e._v(e._s(e.item.realname))]),e._v(" "),n("div",{staticClass:"fl-h-time"},[e._v(e._s(e.item.createTime))])]),e._v(" "),n("flexbox",{staticClass:"fl-h-mark"},[n("img",{staticClass:"fl-h-mark-img",attrs:{src:i("N0PQ")}}),e._v(" "),n("div",{staticClass:"fl-h-mark-name"},[e._v("Hồ sơ theo dõi")])]),e._v(" "),n("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[n("i",{staticClass:"el-icon-arrow-down el-icon-more",staticStyle:{color:"#CDCDCD","margin-left":"8px"}}),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"delete"}},[e._v("Xóa")])],1)],1)],1),e._v(" "),n("div",{staticClass:"fl-b"},[n("div",{staticClass:"fl-b-content"},[e._v(e._s(e.item.content))]),e._v(" "),e.item.img&&e.item.img.length>0?n("flexbox",{staticClass:"fl-b-images",attrs:{wrap:"wrap"}},e._l(e.item.img,function(t,i){return n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:t.filePath,expression:"file.filePath",arg:"background-image"}],key:t.filePath,staticClass:"fl-b-img-item",on:{click:function(t){e.previewImg(e.item.img,i)}}})})):e._e(),e._v(" "),e.item.file&&e.item.file.length>0?n("div",{staticClass:"fl-b-files"},e._l(e.item.file,function(t,a){return n("flexbox",{key:a,staticClass:"cell"},[n("img",{staticClass:"cell-head",attrs:{src:i("6KEE")}}),e._v(" "),n("div",{staticClass:"cell-body"},[e._v(e._s(t.name)),n("span",{staticStyle:{color:"#ccc"}},[e._v("（"+e._s(t.size)+"）")])]),e._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(i){e.downloadFile(t)}}},[e._v("Tải về")])],1)})):e._e(),e._v(" "),e.item.category||e.item.nextTime?n("div",{staticClass:"follow"},[e.item.category?n("span",{staticClass:"follow-info"},[e._v(e._s(e.item.category))]):e._e(),e._v(" "),e.item.nextTime?n("span",{staticClass:"follow-info"},[e._v(e._s(e.item.nextTime))]):e._e()]):e._e(),e._v(" "),e.item.contactsList&&e.item.contactsList.length>0?n("div",{staticClass:"fl-b-other"},[n("div",{staticClass:"fl-b-other-name"},[e._v("Các địa chỉ liên hệ")]),e._v(" "),n("div",e._l(e.item.contactsList,function(t,i){return n("flexbox",{key:i,staticClass:"cell",nativeOn:{click:function(i){e.checkRelationDetail("contacts",t.contactsId)}}},[n("i",{staticClass:"wukong wukong-contacts cell-head crm-type",style:{opacity:0==i?1:0}}),e._v(" "),n("div",{staticClass:"cell-body",staticStyle:{color:"#6394E5",cursor:"pointer"}},[e._v(e._s(t.name))])])}))]):e._e(),e._v(" "),e.item.businessList&&e.item.businessList.length>0?n("div",{staticClass:"fl-b-other"},[n("div",{staticClass:"fl-b-other-name"},[e._v("Các cơ hội kinh doanh")]),e._v(" "),n("div",e._l(e.item.businessList,function(t,i){return n("flexbox",{key:i,staticClass:"cell",nativeOn:{click:function(i){e.checkRelationDetail("business",t.businessId)}}},[n("i",{staticClass:"wukong wukong-business cell-head crm-type",style:{opacity:0==i?1:0}}),e._v(" "),n("div",{staticClass:"cell-body",staticStyle:{color:"#6394E5",cursor:"pointer"}},[e._v(e._s(t.businessName))])])}))]):e._e(),e._v(" "),e._t("default")],2),e._v(" "),n("c-r-m-full-screen-detail",{attrs:{visible:e.showFullDetail,"crm-type":e.relationCrmType,id:e.relationID},on:{"update:visible":function(t){e.showFullDetail=t}}})],1)},[],!1,null,"6a5917be",null);c.options.__file="FollowRecordCell.vue";t.a=c.exports},B7ox:function(e,t,i){"use strict";var n=i("Qq94");i.n(n).a},COcv:function(e,t,i){"use strict";var n=i("vIme");i.n(n).a},I0zU:function(e,t,i){},KK9R:function(e,t,i){"use strict";var n=i("Yz3E");i.n(n).a},N0PQ:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZGRjBCRTYxRTBBNzExRTg5QkREOEQxRjlDMkUxOUExIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjZGRjBCRTYyRTBBNzExRTg5QkREOEQxRjlDMkUxOUExIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NkZGMEJFNUZFMEE3MTFFODlCREQ4RDFGOUMyRTE5QTEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NkZGMEJFNjBFMEE3MTFFODlCREQ4RDFGOUMyRTE5QTEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz704RrgAAABwUlEQVR42uSXz0sCQRTH36h1sGNlaHjpVJoHC0KCOnVJOwSdqmM/6NZ/EF071rluQaduGQWd9BZEqWBhQQQmHYIQikDU6bs6G8Oy4q7sskYPPuzOzFu+++a9mZ1lnHNywlzkkDkm7JEb7/m8rWIDoVBHEc+DEuAaSmLMtqk+An6dfr8Ys0T4BHxJUbUzJq6q/yc47kR4CXg1fevgTcf3Faxp+vrAsuHikqxH054A5y2mWvYxnEaPwZTc/Kl1zJPJBt27gbR667YlnUjYMNWMORMxi8edETZhH+AZ9IIx4LZb+A5sieskGALfYMWW4hIFdQtmwJyIVt5gruEziucfrF5OVbAKZsGpzq42BVIQH+6suFovlRRQojnTzWethl73IO52wYaVEd+DcTDSaFUqRPV6c6RYJJ5ON8WJFqwuLkWl/7cWMhmE4SLm8xHP5YhFIkrEJPsYibhqQDgKCur3moXDROUy8Wy2KRoMqn5PZoQLBoSnxTf7otHyeonFYsSiUVlUsUMzwttAOfnV2my3e2ATvKjiFAjIPpdg30yOr0DYRL6VpbMDFoEPPIpz2EGrl2fyn0S3Hm8tNfbv/p1+BBgA+Vdv2Iz9D6cAAAAASUVORK5CYII="},OPCT:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVENDNERTkxRTA5QjExRThBQkRDQjRERjVBMjY3MzE0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVENDNERTkyRTA5QjExRThBQkRDQjRERjVBMjY3MzE0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUQ0M0RFOEZFMDlCMTFFOEFCRENCNERGNUEyNjczMTQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUQ0M0RFOTBFMDlCMTFFOEFCRENCNERGNUEyNjczMTQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7c1/V2AAABIElEQVR42mL8//8/AwicPXuWgVxgbGwMZzMRUBsGxBeB+AXITigfL2DBIxcCxHlA7AnEz4CYB4gnQ+VW4dKEz4UNQBwNNQwEvgBxBhAn4XMhPgMFgPghmthPIP5NroF/cYgzkmsgMw7x/+Qa+AGIZbBEIgu5BjYC8VIgloLyQbE8E4gXkJtsVkMt3Ak1DOTiDiBeSa6BDFDNK0nJNdi8rArEa4H4IzQC0PFHqLwqMQaqA/ERID4IxIrQJIKOFaDyR6Dq8Xq5DYon4fHVe6g8J1RtMD4XugDxYiKDazYQu5GSbMgC6AbuAeJYIvWmAPEuQmFYDQ3w/1Cvv8dikCDU0mIgtifkwhtAbAdV+BBHsnkIlbeDqieYsG+ixxwpACDAAIZEQR7SM/O0AAAAAElFTkSuQmCC"},QJC7:function(e,t,i){"use strict";var n=i("3yi6"),a=i("5tgW"),s=i("vG5h"),l=i("qbf4"),c=i("UcQx"),o=i("6zBA"),r={name:"RecordLog",components:{FollowRecordCell:n.a},props:{id:[String,Number],crmType:{type:String,default:""}},data:function(){return{loading:!1,loadMoreLoading:!0,isPost:!1,page:1,list:[]}},computed:{},watch:{id:function(e){this.refreshList()}},mounted:function(){var e=this;this.$bus.on("follow-log-refresh",function(t){"record-log"==t.type&&e.refreshList()});var t=document.getElementById("follow-log-content");t.onscroll=function(){var i=t.scrollTop+t.clientHeight-t.scrollHeight;Math.abs(i)<10&&1==e.loadMoreLoading&&(e.isPost?e.loadMoreLoading=!1:(e.isPost=!0,e.page++,e.getList()))},this.getList()},activated:function(){},deactivated:function(){},beforeDestroy:function(){this.$bus.off("follow-log-refresh")},methods:{getList:function(){var e=this;this.loading=!0;var t={customer:s.v,leads:a.i,contacts:l.j,business:c.j,contract:o.j}[this.crmType],i={page:this.page,limit:10};i[this.crmType+"Id"]=this.id,t(i).then(function(t){e.list=e.list.concat(t.data),t.data.length<10?e.loadMoreLoading=!1:e.loadMoreLoading=!0,e.loading=!1,e.isPost=!1}).catch(function(){e.isPost=!1,e.loading=!1})},refreshList:function(){this.page=1,this.list=[],this.getList()},cellHandle:function(e){"delete"==e.type&&this.list.splice(e.data.index,1)}}},d=(i("gs/v"),i("KHd+")),m=Object(d.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("div",{directives:[{name:"empty",rawName:"v-empty",value:0===e.list.length,expression:"list.length === 0"}]},[i("div",{staticClass:"log-items"},[e._l(e.list,function(t,n){return i("follow-record-cell",{key:n,attrs:{item:t,index:n,"crm-type":e.crmType},on:{"on-handle":e.cellHandle}})}),e._v(" "),i("div",{staticClass:"load"},[i("el-button",{attrs:{loading:e.loadMoreLoading,type:"text"}},[e._v(e._s(e.loadMoreLoading?"Tải thêm":"Không có dữ liệu"))])],1)],2)])])},[],!1,null,"cfac43fc",null);m.options.__file="RecordLog.vue";t.a=m.exports},Qq94:function(e,t,i){},UEWd:function(e,t,i){"use strict";var n=i("7Qib"),a=i("KTTK"),s={name:"MixAdd",components:{CrmRelative:i("mkuN").a},props:{showRelativeBusiness:{type:Boolean,default:!1},showRelativeContacts:{type:Boolean,default:!1},id:[String,Number],crmType:{type:String,default:""}},data:function(){return{content:"",inputAutosize:{minRows:1,maxRows:6},barItems:[{img:i("S1Xc"),title:"Hình ảnh",type:"img",data:"image/*"},{img:i("rl4O"),title:"Đính kèm",type:"file",data:"*.*"}],imgFiles:[],files:[],business:[],contacts:[],showRelativeType:"",batchId:""}},computed:{},mounted:function(){this.showRelativeBusiness&&this.barItems.push({img:i("i91G"),title:"Cơ hội kinh doanh",type:"business",show:!1}),this.showRelativeContacts&&this.barItems.push({img:i("OPCT"),title:"Thông tin liên hệ",type:"contacts",show:!1}),this.$on("submit-info",function(){this.$emit("mixadd-info",{content:this.content,files:this.files,images:this.imgFiles,business:this.business,contacts:this.contacts,batchId:this.batchId})})},beforeDestroy:function(){this.$off("submit-info")},methods:{resetInfo:function(){this.content="",this.imgFiles=[],this.files=[],this.business=[],this.contacts=[],this.showRelativeType="",this.batchId=""},checkRelativeInfos:function(e){"business"==this.showRelativeType?this.business=e.data:"contacts"==this.showRelativeType&&(this.contacts=e.data)},barClick:function(e){this.showRelativeType=e.type,"business"==e.type?e.show=!0:"contacts"==e.type&&(e.show=!0)},uploadFile:function(e){var t=this,i=e.target.files;if(i.length){for(var n=0;n<i.length;n++){if(-1==i[n].type.indexOf("image")&&"img"==this.showRelativeType)return void this.$message.error("Vui lòng chọn đúng hình ảnh")}var a="image/*"==e.target.accept?"img":"file",s=i[0];this.sendFileRequest(s,a,function(){for(var n=1;n<i.length;n++){var s=i[n];t.sendFileRequest(s,a)}e.target.value=""})}},sendFileRequest:function(e,t,i){var s=this,l={file:e,type:t};this.batchId&&(l.batchId=this.batchId),Object(a.e)(l).then(function(a){""==s.batchId&&(s.batchId=a.batchId),a.size=Object(n.d)(e.size),"img"==t?s.imgFiles.push(a):(a.icon=Object(n.g)(e),s.files.push(a)),i&&i()}).catch(function(){})},deleteAllImg:function(){this.imgFiles=[]},deleteImgOrFile:function(e,t,i){var n=this;Object(a.c)({id:t.fileId}).then(function(t){"image"==e?n.imgFiles.splice(i,1):n.files.splice(i,1),n.$message.success("Thành công")}).catch(function(){})},mouseImgOver:function(e,t){e.showDelete=!0,this.$set(this.imgFiles,t,e)},mouseImgLeave:function(e,t){e.showDelete=!1,this.$set(this.imgFiles,t,e)},inputFocus:function(){var e=this;this.inputAutosize={minRows:3,maxRows:6},this.$nextTick(function(){e.$refs.textarea.resizeTextarea()})}}},l=(i("B7ox"),i("KHd+")),c=Object(l.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mix-container"},[n("div",{staticClass:"i-cont"},[n("el-input",{ref:"textarea",attrs:{autosize:e.inputAutosize,type:"textarea",clearable:"",resize:"none",placeholder:"Vui lòng nhập nội dung"},on:{focus:e.inputFocus},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),e._v(" "),e.imgFiles.length>0?n("section",{staticClass:"img-cont"},[n("flexbox",{attrs:{wrap:"wrap"}},[e._l(e.imgFiles,function(t,i){return n("div",{key:i,staticClass:"img-item",style:{"background-image":"url("+t.url+")"},on:{mouseover:function(n){e.mouseImgOver(t,i)},mouseleave:function(n){e.mouseImgLeave(t,i)}}},[t.showDelete?n("div",{staticClass:"img-delete",on:{click:function(n){e.deleteImgOrFile("image",t,i)}}},[e._v("×")]):e._e()])}),e._v(" "),n("div",{staticClass:"img-item-add"},[n("input",{staticClass:"img-item-iput",attrs:{type:"file",accept:"image/*",multiple:""},on:{change:e.uploadFile}})])],2),e._v(" "),n("div",{staticClass:"img-bar",on:{click:e.deleteAllImg}},[e._v("Xóa tất cả")])],1):e._e(),e._v(" "),e.files.length>0?n("section",{staticClass:"file-cont"},[n("flexbox",{staticClass:"f-header"},[n("img",{staticClass:"f-logo",attrs:{src:i("rl4O")}}),e._v(" "),n("div",{staticClass:"f-name"},[e._v("Đính kèm")])]),e._v(" "),n("div",{staticClass:"f-body"},e._l(e.files,function(t,i){return n("flexbox",{key:i,staticClass:"f-item"},[n("img",{staticClass:"f-img",attrs:{src:t.icon}}),e._v(" "),n("div",{staticClass:"f-name"},[e._v(e._s(t.name+"("+t.size+")"))]),e._v(" "),n("div",{staticClass:"close-button",on:{click:function(n){e.deleteImgOrFile("file",t,i)}}},[e._v("×")])])})),e._v(" "),n("div",{staticClass:"img-bar",on:{click:function(t){e.files=[]}}},[e._v("Xóa tất cả")])],1):e._e(),e._v(" "),e.business.length>0?n("section",{staticClass:"c-cont"},[n("flexbox",{staticClass:"c-header"},[n("img",{staticClass:"c-logo",attrs:{src:i("i91G")}}),e._v(" "),n("div",{staticClass:"c-name"},[e._v("Gởi")])]),e._v(" "),n("div",{staticClass:"c-body"},[n("flexbox",{attrs:{wrap:"wrap"}},e._l(e.business,function(t,i){return n("flexbox",{key:i,staticClass:"c-item"},[n("div",{staticClass:"c-item-name"},[e._v(e._s(t.businessName))]),e._v(" "),n("div",{staticClass:"c-item-close",on:{click:function(t){e.business.splice(i,1)}}},[e._v("×")])])}))],1)],1):e._e(),e._v(" "),e.contacts.length>0?n("section",{staticClass:"c-cont"},[n("flexbox",{staticClass:"c-header"},[n("img",{staticClass:"c-logo",attrs:{src:i("OPCT")}}),e._v(" "),n("div",{staticClass:"c-name"},[e._v("Người liên hệ")])]),e._v(" "),n("div",{staticClass:"c-body"},[n("flexbox",{attrs:{wrap:"wrap"}},e._l(e.contacts,function(t,i){return n("flexbox",{key:i,staticClass:"c-item"},[n("div",{staticClass:"c-item-name"},[e._v(e._s(t.name))]),e._v(" "),n("div",{staticClass:"c-item-close",on:{click:function(t){e.contacts.splice(i,1)}}},[e._v("×")])])}))],1)],1):e._e(),e._v(" "),n("flexbox",{staticClass:"bar-cont"},[e._l(e.barItems,function(t,i){return["img"==t.type||"file"==t.type?n("flexbox",{key:i,staticClass:"bar-item",nativeOn:{click:function(i){e.barClick(t)}}},[n("input",{staticClass:"bar-input",attrs:{accept:t.data,type:"file",multiple:""},on:{change:e.uploadFile}}),e._v(" "),n("img",{staticClass:"bar-img",attrs:{src:t.img}}),e._v(" "),n("div",{staticClass:"bar-title"},[e._v(e._s(t.title))])]):n("el-popover",{key:i,attrs:{placement:"bottom",width:"700","popper-class":"no-padding-popover",trigger:"click"},model:{value:t.show,callback:function(i){e.$set(t,"show",i)},expression:"item.show"}},[n("crm-relative",{ref:"crmrelative",refInFor:!0,attrs:{show:t.show,radio:!1,action:{type:"condition",data:{moduleType:e.crmType,customerId:e.id}},"selected-data":"business"==t.type?{business:e.business}:{contacts:e.contacts},"crm-type":t.type},on:{close:function(e){t.show=!1},changeCheckout:e.checkRelativeInfos}}),e._v(" "),n("flexbox",{staticClass:"bar-item",attrs:{slot:"reference"},nativeOn:{click:function(i){e.barClick(t)}},slot:"reference"},[n("img",{staticClass:"bar-img",attrs:{src:t.img}}),e._v(" "),n("div",{staticClass:"bar-title"},[e._v(e._s(t.title))])])],1)]})],2)],1)},[],!1,null,"604eed47",null);c.options.__file="MixAdd.vue";t.a=c.exports},VPeB:function(e,t,i){"use strict";var n=i("I0zU");i.n(n).a},Yz3E:function(e,t,i){},beNh:function(e,t,i){"use strict";i.r(t);var n=i("mqlf"),a=i("kegP"),s={name:"ClueIndex",components:{ClueDetail:n.a},mixins:[a.a],data:function(){return{crmType:"leads"}},computed:{},mounted:function(){},methods:{cellStyle:function(e){e.row;var t=e.column;e.rowIndex,e.columnIndex;return"leadsName"===t.property?{color:"#3E84E9",cursor:"pointer"}:""},genTableHeader:function(e){return(e=e.toLowerCase()).charAt(0).toUpperCase()+e.slice(1)}}},l=(i("bzbI"),i("KHd+")),c=Object(l.a)(s,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("c-r-m-list-head",{attrs:{search:e.search,"crm-type":e.crmType,title:"Quản lý khác hàng tiềm năng",placeholder:"Vui lòng nhập tên của khách hàng tiềm năng / điện thoại di động / điện thoại","main-title":"Khách hàng tiềm năng mới"},on:{"update:search":function(t){e.search=t},"on-handle":e.listHeadHandle,"on-search":e.crmSearch,"on-export":e.exportInfos}}),e._v(" "),n("div",{directives:[{name:"empty",rawName:"v-empty",value:!e.crm.leads.index,expression:"!crm.leads.index"}],staticClass:"crm-container",attrs:{"xs-empty-icon":"nopermission","xs-empty-text":"Không có quyền"}},[n("c-r-m-table-head",{ref:"crmTableHead",attrs:{"crm-type":e.crmType},on:{filter:e.handleFilter,exportData:e.exportData,handle:e.handleHandle,scene:e.handleScene}}),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"n-table--border",staticStyle:{width:"100%"},attrs:{id:"crm-table",data:e.list,height:e.tableHeight,"cell-style":e.cellStyle,stripe:"",border:"","highlight-current-row":""},on:{"row-click":e.handleRowClick,"sort-change":e.sortChange,"header-dragend":e.handleHeaderDragend,"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"selection",align:"center",width:"55"}}),e._v(" "),e._l(e.fieldList,function(t,i){return n("el-table-column",{key:i,attrs:{fixed:0==i,prop:t.prop,label:e.genTableHeader(t.label),width:150,formatter:e.fieldFormatter,sortable:"custom","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){return[n("div",{staticClass:"table-head-name"},[e._v(e._s(t.column.label))])]}}])})}),e._v(" "),n("el-table-column"),e._v(" "),n("el-table-column",{attrs:{fixed:"right",width:"36"},scopedSlots:e._u([{key:"header",fn:function(t){return[n("img",{staticClass:"table-set",attrs:{src:i("zbTZ")},on:{click:e.handleTableSet}})]}}])})],2),e._v(" "),n("div",{staticClass:"p-contianer"},[n("el-pagination",{staticClass:"p-bar",attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:pageSize":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),e.showDview?n("clue-detail",{staticClass:"d-view",attrs:{id:e.rowID},on:{handle:e.handleHandle,"hide-view":function(t){e.showDview=!1}}}):e._e(),e._v(" "),n("fields-set",{attrs:{"crm-type":e.crmType,"dialog-visible":e.showFieldSet},on:{"update:dialogVisible":function(t){e.showFieldSet=t},"set-success":e.setSave}})],1)},[],!1,null,"682ac3c4",null);c.options.__file="ClueIndex.vue";t.default=c.exports},bzbI:function(e,t,i){"use strict";var n=i("pv7B");i.n(n).a},"gs/v":function(e,t,i){"use strict";var n=i("ta8G");i.n(n).a},i68b:function(e,t,i){"use strict";var n=i("QbLZ"),a=i.n(n),s=i("KzkL"),l=i("L2JU");t.a={data:function(){return{followTypes:[],followType:""}},computed:a()({},Object(l.b)(["oa"]),{showOAPermission:function(){return this.oa}}),created:function(){this.getFollowLogType()},methods:{getFollowLogType:function(){var e=this;this.loading=!0,Object(s.x)().then(function(t){e.loading=!1,e.followTypes=t.data.map(function(e){return{type:e,name:e}}),e.followType=t.data.length>0?t.data[0]:""}).catch(function(){e.loading=!1})}},deactivated:function(){}}},i91G:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjU2RjI0NjM0RTA5QjExRTg4QTE5QjM2OEE1QUE5MUZBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjU2RjI0NjM1RTA5QjExRTg4QTE5QjM2OEE1QUE5MUZBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTZGMjQ2MzJFMDlCMTFFODhBMTlCMzY4QTVBQTkxRkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTZGMjQ2MzNFMDlCMTFFODhBMTlCMzY4QTVBQTkxRkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4H2LzoAAAAnklEQVR42mI8c+YMA7WAsbExAxMDlQGygSuA+B8Q/8eD/0HV4QQsSOwwNAtwAZChEcS4kJFIXzES62WqhyFdDESOqH1ocjuwRRQLAQPxRZQHEvsvLKKYKIkAbD5FNvA/kZr/ExuGq5HC6wiauo1I4bWa2IQdDsXYgP+gTTZUN5DYiPpHbDqERRQjAUtXE2sgvojCnnD///8/uCMFIMAAVWsql9WKpTgAAAAASUVORK5CYII="},mqlf:function(e,t,i){"use strict";var n=i("5tgW"),a=i("Ew9n"),s=i("F03V"),l=i("UEWd"),c=i("QJC7"),o=i("i68b"),r={name:"ClueFollow",components:{MixAdd:l.a,RecordLog:c.a},mixins:[o.a],props:{id:[String,Number],crmType:{type:String,default:""}},data:function(){return{sendLoading:!1,nextTime:"",isEvent:!1,logType:"record",logTypes:[]}},computed:{componentsName:function(){return"record"==this.logType?"RecordLog":""}},watch:{},mounted:function(){},activated:function(){},deactivated:function(){},methods:{handleTypeDrop:function(e){this.followType=e},logTabsClick:function(e,t){this.logType=e.type},sendInfo:function(){this.$refs.mixadd.$emit("submit-info")},submitInfo:function(e){var t=this;if(!this.isEvent||this.nextTime)if(e.content){var i={};i.typesId=this.id,i.content=e.content,i.category=this.followType,i.batchId=e.batchId,i.isEvent=this.isEvent?1:0,i.nextTime=this.nextTime||"",this.sendLoading=!0,Object(n.j)(i).then(function(e){t.sendLoading=!1,t.$message.success("Thành công"),t.$refs.mixadd.resetInfo(),t.isEvent=!1,t.nextTime="",t.$bus.emit("follow-log-refresh",{type:"record-log"})}).catch(function(){t.sendLoading=!1})}else this.$message.error("Vui lòng nhập nội dung tiếp theo");else this.$message.error("Vui lòng chọn thời gian liên hệ tiếp theo")}}},d=(i("COcv"),i("KHd+")),m=Object(d.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"f-container"},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.sendLoading,expression:"sendLoading"}]},[i("mix-add",{ref:"mixadd",attrs:{"crm-type":e.crmType,id:e.id},on:{"mixadd-info":e.submitInfo}}),e._v(" "),i("flexbox",{staticClass:"se-section"},[i("div",{staticClass:"se-name"},[e._v("Cách liên lạc")]),e._v(" "),i("el-dropdown",{staticStyle:{"margin-right":"20px"},attrs:{trigger:"click"},on:{command:e.handleTypeDrop}},[i("flexbox",{staticClass:"se-select"},[i("div",{staticClass:"se-select-name"},[e._v(e._s(e.followType?e.followType:"Vui lòng chọn"))]),e._v(" "),i("i",{staticClass:"el-icon-arrow-down el-icon--right",staticStyle:{color:"#ccc"}})]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.followTypes,function(t,n){return i("el-dropdown-item",{key:n,attrs:{command:t.type}},[e._v(e._s(t.name))])}))],1),e._v(" "),i("div",{staticClass:"se-name"},[e._v("Lần liên hệ tiếp theo")]),e._v(" "),i("el-date-picker",{staticClass:"se-datepicker",attrs:{"default-value":new Date,editable:!1,type:"datetime",placeholder:"Ngày","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.nextTime,callback:function(t){e.nextTime=t},expression:"nextTime"}}),e._v(" "),e.showOAPermission?i("el-checkbox",{model:{value:e.isEvent,callback:function(t){e.isEvent=t},expression:"isEvent"}},[e._v("Thêm vào lời nhắc chương trình làm việc")]):e._e(),e._v(" "),i("el-button",{staticClass:"se-send",attrs:{type:"primary"},nativeOn:{click:function(t){return e.sendInfo(t)}}},[e._v("Gởi")])],1)],1),e._v(" "),i("div",{staticClass:"log-cont"},[e.logTypes.length>0?i("flexbox",{staticStyle:{"border-bottom":"1px solid #E6E6E6"}},e._l(e.logTypes,function(t,n){return i("flexbox",{key:n,staticStyle:{width:"auto"},nativeOn:{click:function(i){e.logTabsClick(t,n)}}},[i("div",{staticClass:"log-tabs-item",style:{color:e.logType==t.type?"#F18C70":"#777"}},[e._v(e._s(t.name))]),e._v(" "),e.logTypes.length-1!=n?i("div",{staticClass:"log-tabs-line"}):e._e()])})):e._e(),e._v(" "),i(e.componentsName,{tag:"component",attrs:{id:e.id,"crm-type":e.crmType}})],1)])},[],!1,null,"8af75c30",null);m.options.__file="ClueFollow.vue";var u=m.exports,h=i("U05J"),g=i("C+sD"),v=i("8DbX"),p=i("EgJF"),b=i("4+0Q"),f={name:"ClueDetail",components:{SlideView:a.a,CRMDetailHead:s.a,ClueFollow:u,CRMBaseInfo:h.a,RelativeFiles:g.a,RelativeHandle:v.a,CRMCreateView:p.default},mixins:[b.a],props:{id:[String,Number],listenerIDs:{type:Array,default:function(){return["crm-main-container"]}},noListenerIDs:{type:Array,default:function(){return[]}},noListenerClass:{type:Array,default:function(){return["el-table__body"]}}},data:function(){return{loading:!1,crmType:"leads",detailData:{},headDetails:[{title:"Tên",value:""},{title:"Nguồn",value:""},{title:"Điện thoại di động",value:""},{title:"Người phụ trách",value:""},{title:"Ngày tạo",value:""}],tabnames:[{label:"Hồ sơ theo dõi",name:"followlog"},{label:"Thông tin cơ bản",name:"basicinfo"},{label:"Đính kèm",name:"file"},{label:"Nhật ký",name:"operationlog"}],tabCurrentName:"followlog",isCreate:!1}},computed:{tabName:function(){return"followlog"==this.tabCurrentName?"clue-follow":"basicinfo"==this.tabCurrentName?"c-r-m-base-info":"file"==this.tabCurrentName?"relative-files":"operationlog"==this.tabCurrentName?"relative-handle":""}},mounted:function(){},methods:{getDetial:function(){var e=this;this.loading=!0,Object(n.h)({leadsId:this.id}).then(function(t){e.detailData=t.data,e.headDetails[0].value=t.data.name,e.headDetails[1].value=t.data.线索来源,e.headDetails[2].value=t.data.mobile,e.headDetails[3].value=t.data.ownerUserName,e.headDetails[4].value=t.data.createTime,e.loading=!1}).catch(function(){e.loading=!1})},hideView:function(){this.$emit("hide-view")},handleClick:function(e,t){},editSaveSuccess:function(){this.$emit("handle",{type:"save-success"}),this.getDetial()}}},y=(i("KK9R"),Object(d.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("slide-view",{directives:[{name:"empty",rawName:"v-empty",value:!e.canShowDetail,expression:"!canShowDetail"}],attrs:{"listener-ids":e.listenerIDs,"no-listener-ids":e.noListenerIDs,"no-listener-class":e.noListenerClass,"body-style":{padding:0,height:"100%"},"xs-empty-icon":"nopermission","xs-empty-text":"Không có quyền"},on:{"side-close":e.hideView}},[e.canShowDetail?i("flexbox",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"d-container",attrs:{direction:"column",align:"stretch"}},[i("c-r-m-detail-head",{attrs:{detail:e.detailData,"head-details":e.headDetails,id:e.id,"crm-type":"leads"},on:{handle:e.detailHeadHandle,close:e.hideView}}),e._v(" "),i("div",{staticClass:"tabs"},[i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.tabCurrentName,callback:function(t){e.tabCurrentName=t},expression:"tabCurrentName"}},e._l(e.tabnames,function(e,t){return i("el-tab-pane",{key:t,attrs:{label:e.label,name:e.name}})}))],1),e._v(" "),i("div",{staticClass:"t-loading-content",attrs:{id:"follow-log-content"}},[i("keep-alive",[i(e.tabName,{tag:"component",attrs:{detail:e.detailData,id:e.id,"crm-type":"leads"}})],1)],1)],1):e._e(),e._v(" "),e.isCreate?i("c-r-m-create-view",{attrs:{action:{type:"update",id:e.id,batchId:e.detailData.batchId},"crm-type":"leads"},on:{"save-success":e.editSaveSuccess,"hiden-view":function(t){e.isCreate=!1}}}):e._e()],1)},[],!1,null,"f60051ec",null));y.options.__file="ClueDetail.vue";t.a=y.exports},pv7B:function(e,t,i){},rl4O:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjUzM0EzN0E0RTA5QjExRTg4MTZEOEM2ODYxNjE5QjM3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjUzM0EzN0E1RTA5QjExRTg4MTZEOEM2ODYxNjE5QjM3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTMzQTM3QTJFMDlCMTFFODgxNkQ4QzY4NjE2MTlCMzciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NTMzQTM3QTNFMDlCMTFFODgxNkQ4QzY4NjE2MTlCMzciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7neeY0AAABL0lEQVR42syUv0tCURSA1Vzam5ya+h8ag5DG3GpqqsAiwVFoECJc+jGpCFZrLTpFUjQ7PPwjClxyiCY3+y6cB5fLud0rOXjhG965j++de865L5skSWaRK5dZ8JpHmIUG/MAA1v4jNLIWVKAO6/CmSWOFO3AAJbiCLVjVpLHCV9iAF3ke+6S5wDFr8Az78Ons29LHkNDImnAO3/AAZeU9I+3AZhrI/9EAU7Nd6egIbuEJJk5tL2RPzVCTpfGZ0qieZF/TMvTJzmT+TqzsbFnZ/pidYUORHcKNzF87JHMzPJXUB1ZsBY6gGyNzhUM4lhEYS6ztqZkqc4+8B1N4h4LSgH5I5gq/YFuRprL7kEwbm4kjrYrsLkbmuymp9AMu4VpGZhZz6fOeuJEWl+KP/SvAAHR5UyjSji44AAAAAElFTkSuQmCC"},ta8G:function(e,t,i){},vIme:function(e,t,i){}}]);