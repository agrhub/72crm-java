(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2381"],{"6R3Q":function(t,e,n){"use strict";var i={name:"Reminder",components:{},props:{content:{type:String,default:"Nội dung"},fontSize:{type:String,default:"13"}},data:function(){return{}},computed:{},mounted:function(){},destroyed:function(){},methods:{}},a=(n("PG71"),n("KHd+")),o=Object(a.a)(i,function(){var t=this.$createElement,e=this._self._c||t;return e("flexbox",{staticClass:"reminder-wrapper"},[e("flexbox",{staticClass:"reminder-body",attrs:{align:"stretch"}},[e("i",{staticClass:"wukong wukong-reminder reminder-icon"}),this._v(" "),e("div",{staticClass:"reminder-content",style:{"font-size":this.fontSize+"px"}},[this._v("\n      "+this._s(this.content)+"\n    ")])])],1)},[],!1,null,"53525604",null);o.options.__file="reminder.vue";e.a=o.exports},"6kYF":function(t,e,n){},CXDl:function(t,e,n){"use strict";var i=n("zzYY");n.n(i).a},FSvo:function(t,e,n){"use strict";n.r(e);var i=n("t3Un");var a={name:"JurisdictionCreate",components:{},props:{show:{type:Boolean,default:!1},action:{type:Object,default:function(){return{type:"save"}}}},data:function(){return{loading:!1,roleName:"",remark:"",showTreeData:[],defaultProps:{children:"childMenu",label:"menuName"}}},computed:{diaTitle:function(){return"save"==this.action.type?"Mới":"Chỉnh sửa"}},watch:{show:function(t){t&&this.initInfo()}},mounted:function(){},methods:{initInfo:function(){"update"==this.action.type?(this.roleName=this.action.data.roleName,this.remark=this.action.data.remark):(this.roleName="",this.remark="",this.$refs.tree&&this.$refs.tree.setCheckedKeys([])),0==this.showTreeData.length?this.getRulesList():this.checkTreeByUpdateInfo()},getRulesList:function(){var t=this;this.loading=!0,function(t){return Object(i.a)({url:"system/menu/getWorkMenuList",method:"post",data:t})}().then(function(e){t.showTreeData=[e.data],t.checkTreeByUpdateInfo(),t.loading=!1}).catch(function(){t.loading=!1})},checkTreeByUpdateInfo:function(){var t=this;"update"==this.action.type&&this.$nextTick(function(){t.$refs.tree&&t.$refs.tree.setCheckedKeys(t.getUserModuleRules(t.action.data.rules))})},sureClick:function(){var t=this;if(this.roleName){this.loading=!0;var e=this.$refs.tree.getCheckedKeys(),n={roleName:this.roleName,remark:this.remark,rules:e};"update"==this.action.type&&(n.roleId=this.action.data.roleId),function(t){return Object(i.a)({url:"system/role/setWorkRole",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}(n).then(function(e){t.loading=!1,t.$emit("submite"),t.closeView()}).catch(function(){t.loading=!1})}else this.$message.error("Vui lòng điền vào tên vai trò")},closeView:function(){this.$emit("update:show",!1)},getUserModuleRules:function(t){t||(t=[]);for(var e=this.showTreeData[0],n=!1,i=this.copyItem(t),a=0;a<e.childMenu.length;a++){var o=e.childMenu[a];o.childMenu||(o.childMenu=[]);for(var s=0;s<t.length;s++){for(var r=t[s],l=[],c=0;c<o.childMenu.length;c++){var u=o.childMenu[c];u.menuId==r&&l.push(u)}l.length!=o.childMenu.length&&(n=!0,this.removeItem(i,o.menuId))}}n&&this.removeItem(i,e.menuId);for(var d=[],h=0;h<i.length;h++){var m=i[h];m&&d.push(parseInt(m))}return d},copyItem:function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e},removeItem:function(t,e){for(var n=-1,i=0;i<t.length;i++)if(e==t[i]){n=i;break}n>0&&t.splice(n,1)},containItem:function(t,e){for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1}}},o=(n("CXDl"),n("KHd+")),s=Object(o.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"create-dialog",attrs:{title:t.diaTitle,visible:t.show,"modal-append-to-body":!0,"append-to-body":!0,"close-on-click-modal":!1,width:"700px"},on:{close:t.closeView}},[n("div",{staticClass:"label-input"},[n("label",{staticClass:"label-title"},[t._v("Tên vai trò")]),t._v(" "),n("el-input",{attrs:{placeholder:"Nhập tên"},model:{value:t.roleName,callback:function(e){t.roleName=e},expression:"roleName"}})],1),t._v(" "),n("div",{staticClass:"label-input"},[n("label",{staticClass:"label-title"},[t._v("Mô tả vài trò")]),t._v(" "),n("el-input",{attrs:{rows:2,type:"textarea",placeholder:"Nhập mô tả"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1),t._v(" "),n("label",{staticClass:"label-title"},[t._v("Phân cấp")]),t._v(" "),n("div",{staticClass:"jurisdiction-content-checkbox"},[n("el-tree",{ref:"tree",staticStyle:{height:"0"},attrs:{data:t.showTreeData,indent:0,"expand-on-click-node":!1,props:t.defaultProps,"show-checkbox":"","node-key":"menuId","empty-text":"","default-expand-all":""}})],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.sureClick}},[t._v("Lưu")]),t._v(" "),n("el-button",{on:{click:t.closeView}},[t._v("Đóng")])],1)])},[],!1,null,"47441c49",null);s.options.__file="jurisdictionCreate.vue";var r={name:"SystemProject",components:{JurisdictionCreate:s.exports,Reminder:n("6R3Q").a},mixins:[],data:function(){return{loading:!1,tableHeight:document.documentElement.clientHeight-196,list:[],createAction:{type:"save"},jurisdictionCreateShow:!1}},computed:{},mounted:function(){var t=this;window.onresize=function(){t.tableHeight=document.documentElement.clientHeight-196},this.getList()},methods:{getList:function(){var t=this;this.loading=!0,function(t){return Object(i.a)({url:"system/role/queryProjectRoleList",method:"post",data:t})}().then(function(e){t.list=e.data,t.loading=!1}).catch(function(){t.loading=!1})},addJurisdiction:function(){this.createAction={type:"save"},this.jurisdictionCreateShow=!0},handleRowClick:function(t,e,n){},handleClick:function(t,e){var n=this;"edit"===t?(this.createAction={type:"update",data:e.row},this.jurisdictionCreateShow=!0):"delete"===t&&this.$confirm("Xác nhận xóa?","Thông báo",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){(function(t){return Object(i.a)({url:"system/role/deleteWorkRole",method:"post",data:t})})({roleId:e.row.roleId}).then(function(t){n.list.splice(e.$index,1),n.$message({type:"success",message:"Thành công"})}).catch(function(){})}).catch(function(){n.$message({type:"info",message:"Không thành công"})})}}},l=(n("pSxu"),Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"se-container"},[n("div",{staticClass:"se-header"},[t._v("Quyền quản trị dự án")]),t._v(" "),n("div",{staticClass:"se-body"},[n("div",{staticClass:"se-table-header"},[n("reminder",{staticClass:"project-reminder",attrs:{content:"Đặt quyền hoạt động cho các dự án phù hợp, danh sách nhiệm vụ và nhiệm vụ cho các quyền được yêu cầu bởi các thành viên dự án trong các tình huống khác nhau"}}),t._v(" "),n("el-button",{staticClass:"se-table-header-button",attrs:{type:"primary"},on:{click:t.addJurisdiction}},[t._v("Quyền mới")])],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"main-table",staticStyle:{width:"100%"},attrs:{id:"examine-table",data:t.list,height:t.tableHeight,"highlight-current-row":""},on:{"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"roleName",width:"150",label:"Tên quyền"}}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"remark",label:"Mô tả"}}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"Tủy chỉnh",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{disabled:5==e.row.roleType,type:"text",size:"small"},on:{click:function(n){t.handleClick("edit",e)}}},[t._v("Chỉnh sửa")]),t._v(" "),n("el-button",{attrs:{disabled:5==e.row.roleType,type:"text",size:"small"},on:{click:function(n){t.handleClick("delete",e)}}},[t._v("Xóa")])]}}])})],1)],1),t._v(" "),n("jurisdiction-create",{attrs:{show:t.jurisdictionCreateShow,action:t.createAction},on:{"update:show":function(e){t.jurisdictionCreateShow=e},submite:t.getList}})],1)},[],!1,null,"671534c8",null));l.options.__file="index.vue";e.default=l.exports},PG71:function(t,e,n){"use strict";var i=n("iKuw");n.n(i).a},iKuw:function(t,e,n){},pSxu:function(t,e,n){"use strict";var i=n("6kYF");n.n(i).a},zzYY:function(t,e,n){}}]);